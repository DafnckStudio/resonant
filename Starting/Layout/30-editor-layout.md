# 30 - Workflow Editor Layout

> Layout principal de l'éditeur de workflow basé sur React Flow avec toutes ses zones.

---

## Vue d'Ensemble

L'éditeur de workflow est l'interface principale pour créer et modifier des workflows visuels. Il utilise React Flow pour le canvas interactif de nodes et edges.

---

## Layout Principal Desktop (>= 1280px)

```
┌────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                        EDITOR HEADER                                                            │
│  ┌────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │ ← Back  │  📁 Workflow Name ▾  │ ● Saved │ v2.3.1 │               │  [Run ▶] [Share] [Settings ⚙] │ 👤👤 +2 │  ⋮  │       │ │
│  └────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
├────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                                │
│  ┌─────────────┐  ┌─────────────────────────────────────────────────────────────────────────────────┐  ┌────────────────────┐  │
│  │             │  │                                                                                 │  │                    │  │
│  │   BLOCK     │  │                                                                                 │  │    PROPERTIES      │  │
│  │   PALETTE   │  │                                                                                 │  │      PANEL         │  │
│  │             │  │                                                                                 │  │                    │  │
│  │  ─────────  │  │                                                                                 │  │  ──────────────    │  │
│  │             │  │                              REACT FLOW                                         │  │                    │  │
│  │  Triggers   │  │                               CANVAS                                            │  │  Block Settings    │  │
│  │  ┌───────┐  │  │                                                                                 │  │                    │  │
│  │  │Webhook│  │  │         ┌─────────────┐        ┌─────────────┐        ┌─────────────┐          │  │  Input Config      │  │
│  │  │Manual │  │  │         │             │        │             │        │             │          │  │                    │  │
│  │  │Schedule│  │  │         │   TRIGGER   │───────▶│     AI      │───────▶│   OUTPUT    │          │  │  AI Model          │  │
│  │  └───────┘  │  │         │             │        │             │        │             │          │  │  ┌──────────────┐  │  │
│  │             │  │         └─────────────┘        └──────┬──────┘        └─────────────┘          │  │  │ GPT-4o    ▾  │  │  │
│  │  AI Blocks  │  │                                       │                                         │  │  └──────────────┘  │  │
│  │  ┌───────┐  │  │                                       │                                         │  │                    │  │
│  │  │Chat   │  │  │                                       ▼                                         │  │  Temperature       │  │
│  │  │Analyze│  │  │                              ┌─────────────┐                                    │  │  ───────────────   │  │
│  │  │Generate│  │  │                              │             │                                    │  │  0.7               │  │
│  │  │Classify│  │  │                              │  DATABASE   │                                    │  │                    │  │
│  │  └───────┘  │  │                              │             │                                    │  │  Prompt Template   │  │
│  │             │  │                              └─────────────┘                                    │  │  ┌──────────────┐  │  │
│  │  Logic      │  │                                                                                 │  │  │ You are a... │  │  │
│  │  ┌───────┐  │  │                                                                                 │  │  │              │  │  │
│  │  │If/Else│  │  │                                                                                 │  │  └──────────────┘  │  │
│  │  │Loop   │  │  │                                                                                 │  │                    │  │
│  │  │Switch │  │  │                                                                                 │  │  ──────────────    │  │
│  │  └───────┘  │  │                                                                                 │  │                    │  │
│  │             │  │ ┌──────────────────────────────────────────────────────────────────────────┐    │  │  Test Block        │  │
│  │  Data       │  │ │ 🔍 Search blocks...  │  📐 Zoom: 75%  │  🗺 Minimap  │  🔲 Fit View      │    │  │  ┌──────────────┐  │  │
│  │  ┌───────┐  │  │ └──────────────────────────────────────────────────────────────────────────┘    │  │  │  Test  ▶     │  │  │
│  │  │API    │  │  │                                                                                 │  │  └──────────────┘  │  │
│  │  │Database│  │  │                                                                                 │  │                    │  │
│  │  │Transform│  │  └─────────────────────────────────────────────────────────────────────────────────┘  │                    │  │
│  │  └───────┘  │                                                                                        │                    │  │
│  │             │  ┌─────────────────────────────────────────────────────────────────────────────────┐  │                    │  │
│  │  Output     │  │                              EXECUTION PANEL (Collapsed)                         │  │                    │  │
│  │  ┌───────┐  │  │  ┌────────────────┐ ┌────────────────┐ ┌────────────────┐          │ ▲ Expand │  │                    │  │
│  │  │Email  │  │  │  │ Last: ✓ 2.1s   │ │ Runs: 156      │ │ Success: 98%   │          └─────────┘  │                    │  │
│  │  │Webhook│  │  │  └────────────────┘ └────────────────┘ └────────────────┘                        │                    │  │
│  │  │File   │  │  └─────────────────────────────────────────────────────────────────────────────────┘  │                    │  │
│  │  └───────┐  │                                                                                        │                    │  │
│  │             │                                                                                        │                    │  │
│  └─────────────┘                                                                                        └────────────────────┘  │
│                                                                                                                                │
│   240px                                            Flexible (min 600px)                                       320px            │
│                                                                                                                                │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Zones de l'Éditeur

### Zone 1: Editor Header (56px height)

```
┌────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                                                │
│  ┌──────┐  ┌────────────────────────────────────────┐  ┌──────────────────────────┐  ┌────────────────────────────────────────┐│
│  │      │  │                                        │  │                          │  │                                        ││
│  │  ←   │  │  📁 Email Campaign Automation ▾        │  │ ● Saved  │  v2.3.1 ▾    │  │  [Undo] [Redo] │ [▶ Run] [👥] [⚙] [⋮] ││
│  │      │  │                                        │  │                          │  │                                        ││
│  │ Back │  │  Workflow Name (editable on click)     │  │  Status    Version       │  │  Actions & Collaborators               ││
│  │      │  │                                        │  │                          │  │                                        ││
│  └──────┘  └────────────────────────────────────────┘  └──────────────────────────┘  └────────────────────────────────────────┘│
│                                                                                                                                │
│     1            2                                           3                                      4                          │
│                                                                                                                                │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

**Sections:**

| Section | Contenu | Actions |
|---------|---------|---------|
| 1. Navigation | Back button | Retour à la liste workflows |
| 2. Workflow Info | Name (editable), Folder | Click pour éditer |
| 3. Status | Save status, Version | Version dropdown pour historique |
| 4. Actions | Undo/Redo, Run, Share, Settings, More | Actions rapides |

### Zone 2: Block Palette (240px width)

```
┌─────────────────────────────┐
│                             │
│  ┌───────────────────────┐  │
│  │ 🔍 Search blocks...   │  │
│  └───────────────────────┘  │
│                             │
│  TRIGGERS                   │
│  ─────────                  │
│  ┌───────────────────────┐  │
│  │ 📥  Webhook           │  │
│  │     HTTP endpoint     │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ 👆  Manual Trigger    │  │
│  │     Button click      │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ ⏰  Schedule          │  │
│  │     Cron expression   │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ 📧  Email Trigger     │  │
│  │     On email receive  │  │
│  └───────────────────────┘  │
│                             │
│  AI BLOCKS                  │
│  ─────────                  │
│  ┌───────────────────────┐  │
│  │ 🤖  Chat              │  │
│  │     AI conversation   │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ 📝  Generate Text     │  │
│  │     LLM completion    │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ 🔍  Analyze           │  │
│  │     Extract insights  │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ 🏷   Classify         │  │
│  │     Categorize data   │  │
│  └───────────────────────┘  │
│                             │
│  LOGIC                      │
│  ─────                      │
│  ┌───────────────────────┐  │
│  │ ⚡  If/Else           │  │
│  │     Conditional       │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ 🔄  Loop              │  │
│  │     Iterate items     │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ 🔀  Switch            │  │
│  │     Multiple paths    │  │
│  └───────────────────────┘  │
│                             │
│  DATA                       │
│  ────                       │
│  ┌───────────────────────┐  │
│  │ 🌐  HTTP Request      │  │
│  │     API call          │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ 🗄   Database         │  │
│  │     CRUD operations   │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ 🔄  Transform         │  │
│  │     Data mapping      │  │
│  └───────────────────────┘  │
│                             │
│  OUTPUT                     │
│  ──────                     │
│  ┌───────────────────────┐  │
│  │ 📧  Send Email        │  │
│  │     SMTP/API          │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ 📤  Webhook Response  │  │
│  │     HTTP response     │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ 📁  Save File         │  │
│  │     File output       │  │
│  └───────────────────────┘  │
│                             │
│  ─────────────────────────  │
│                             │
│  CUSTOM BLOCKS              │
│  ──────────────             │
│  ┌───────────────────────┐  │
│  │ ➕ Create Custom Block │  │
│  └───────────────────────┘  │
│                             │
└─────────────────────────────┘
```

### Zone 3: Canvas (React Flow)

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                              │
│  CANVAS AREA                                                                                                 │
│  ───────────                                                                                                 │
│                                                                                                              │
│      Grid Pattern: dots (subtle)                                                                             │
│      Background: bg-muted/30                                                                                 │
│                                                                                                              │
│                                                                                                              │
│                       ┌─────────────────────────────────────────────────────┐                                │
│                       │                                                     │                                │
│                       │                   WORKFLOW NODES                    │                                │
│                       │                                                     │                                │
│                       │     ┌─────────────────┐                             │                                │
│                       │     │   📥 Webhook    │                             │                                │
│                       │     │   ───────────   │                             │                                │
│                       │     │   POST /api/... │                             │                                │
│                       │     └────────┬────────┘                             │                                │
│                       │              │                                       │                                │
│                       │              │ connection                            │                                │
│                       │              ▼                                       │                                │
│                       │     ┌─────────────────┐      ┌─────────────────┐    │                                │
│                       │     │   🤖 GPT-4o     │─────▶│   📧 Email      │    │                                │
│                       │     │   ───────────   │      │   ───────────   │    │                                │
│                       │     │   Analyze text  │      │   Send result   │    │                                │
│                       │     └─────────────────┘      └─────────────────┘    │                                │
│                       │                                                     │                                │
│                       └─────────────────────────────────────────────────────┘                                │
│                                                                                                              │
│                                                                                                              │
│                                                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────────────────────────────────────┐    │
│  │                                                                                                      │    │
│  │   CANVAS TOOLBAR (Bottom)                                                                            │    │
│  │                                                                                                      │    │
│  │   ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌──────────────┐   │    │
│  │   │  🔍 100%  ▾    │  │  📐 Fit View   │  │  🗺 Minimap    │  │  🔲 Grid       │  │  🔒 Lock     │   │    │
│  │   └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘  └──────────────┘   │    │
│  │                                                                                                      │    │
│  └──────────────────────────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                                              │
│                                                                                                              │
│                 ┌──────────────────────────────────┐                                                         │
│                 │                                  │                                                         │
│                 │         MINIMAP (optional)       │                                                         │
│                 │                                  │                                                         │
│                 │    ┌───┐   ┌───┐                 │                                                         │
│                 │    │   │───│   │───┌───┐        │                                                         │
│                 │    └───┘   └───┘   └───┘        │                                                         │
│                 │                                  │                                                         │
│                 │    [Viewport rectangle]          │                                                         │
│                 │                                  │                                                         │
│                 └──────────────────────────────────┘                                                         │
│                                                                                                              │
└──────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

### Zone 4: Properties Panel (320px width)

```
┌─────────────────────────────────────┐
│                                     │
│  ┌─────────────────────────────┐    │
│  │ AI Block: Chat GPT-4o     × │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────────┐│
│  │ General │ Input │ Output │ Test ││
│  └─────────────────────────────────┘│
│                                     │
│  GENERAL SETTINGS                   │
│  ─────────────────                  │
│                                     │
│  Block Name                         │
│  ┌─────────────────────────────┐    │
│  │ Analyze Customer Email      │    │
│  └─────────────────────────────┘    │
│                                     │
│  Description (optional)             │
│  ┌─────────────────────────────┐    │
│  │ Analyzes incoming email...  │    │
│  └─────────────────────────────┘    │
│                                     │
│  ─────────────────────────────────  │
│                                     │
│  AI MODEL                           │
│  ────────                           │
│                                     │
│  Provider                           │
│  ┌─────────────────────────────┐    │
│  │ OpenAI                    ▾ │    │
│  └─────────────────────────────┘    │
│                                     │
│  Model                              │
│  ┌─────────────────────────────┐    │
│  │ GPT-4o                    ▾ │    │
│  └─────────────────────────────┘    │
│                                     │
│  Temperature                        │
│  ┌─────────────────────────────┐    │
│  │ ○──────────●────────────○   │    │
│  │ 0         0.7            2  │    │
│  └─────────────────────────────┘    │
│                                     │
│  Max Tokens                         │
│  ┌─────────────────────────────┐    │
│  │ 1024                        │    │
│  └─────────────────────────────┘    │
│                                     │
│  ─────────────────────────────────  │
│                                     │
│  PROMPT TEMPLATE                    │
│  ───────────────                    │
│                                     │
│  System Prompt                      │
│  ┌─────────────────────────────┐    │
│  │ You are a helpful customer  │    │
│  │ service AI that analyzes... │    │
│  │                             │    │
│  │                             │    │
│  │ Variables:                  │    │
│  │ {{ input.email_body }}      │    │
│  │ {{ input.sender }}          │    │
│  │                             │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │  📝 Open Full Editor        │    │
│  └─────────────────────────────┘    │
│                                     │
│  ─────────────────────────────────  │
│                                     │
│  ┌─────────────────────────────┐    │
│  │                             │    │
│  │    🧪 Test This Block       │    │
│  │                             │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

### Zone 5: Execution Panel (Collapsed/Expanded)

```
COLLAPSED STATE (56px):
┌────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                                │
│  ┌────────────────────┐  ┌────────────────────┐  ┌────────────────────┐  ┌────────────────────┐  ┌──────────┐ │
│  │ ✓ Last: 2.1s       │  │ 📊 Runs: 156       │  │ ✓ Success: 98%     │  │ ⚡ Credits: 5.2k   │  │ ▲ Expand │ │
│  └────────────────────┘  └────────────────────┘  └────────────────────┘  └────────────────────┘  └──────────┘ │
│                                                                                                                │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘


EXPANDED STATE (300px):
┌────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                                │
│  ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                                                                              [ ▼ Collapse ] │
│  │  Execution Panel                                                                                          │ │
│  │                                                                                                           │ │
│  └──────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                                                │
│  ┌────────────────────────────┐  ┌────────────────────────────┐  ┌────────────────────────────┐               │
│  │       Total Runs           │  │      Success Rate          │  │     Avg Duration           │               │
│  │         156                │  │        98.2%               │  │        2.1s                │               │
│  │     ↑ 12% this week        │  │     ↓ 0.5% this week       │  │     ↓ 0.3s this week       │               │
│  └────────────────────────────┘  └────────────────────────────┘  └────────────────────────────┘               │
│                                                                                                                │
│  ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                                                                                          │ │
│  │  Recent Executions                                                                      [ View All → ]   │ │
│  │                                                                                                          │ │
│  │  ┌────────────────────────────────────────────────────────────────────────────────────────────────────┐  │ │
│  │  │ ✓ exec_abc123  │  Completed  │  "Process newsletter..."  │  2.1s  │  2 min ago  │   [ View ]      │  │ │
│  │  ├────────────────────────────────────────────────────────────────────────────────────────────────────┤  │ │
│  │  │ ✓ exec_def456  │  Completed  │  "Generate response..."   │  1.8s  │  5 min ago  │   [ View ]      │  │ │
│  │  ├────────────────────────────────────────────────────────────────────────────────────────────────────┤  │ │
│  │  │ ✕ exec_ghi789  │  Failed     │  "Rate limit exceeded"    │  --    │  12 min ago │   [ View ]      │  │ │
│  │  └────────────────────────────────────────────────────────────────────────────────────────────────────┘  │ │
│  │                                                                                                          │ │
│  └──────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                                                │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Layout Tablet (768px - 1279px)

```
┌────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                          HEADER                                                     │
├────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                    │
│  ┌───────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                                                                               │ │
│  │                                        CANVAS                                                 │ │
│  │                                   (Full width)                                                │ │
│  │                                                                                               │ │
│  │         ┌─────────────┐        ┌─────────────┐        ┌─────────────┐                        │ │
│  │         │   TRIGGER   │───────▶│     AI      │───────▶│   OUTPUT    │                        │ │
│  │         └─────────────┘        └─────────────┘        └─────────────┘                        │ │
│  │                                                                                               │ │
│  │                                                                                               │ │
│  └───────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                                    │
│  ┌───────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │  EXECUTION PANEL (Collapsed by default)                                                       │ │
│  └───────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                                    │
├────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                    │
│  ┌─────────────────────────────────────────────┐  ┌───────────────────────────────────────────┐   │
│  │         FLOATING BLOCK PALETTE              │  │         FLOATING PROPERTIES               │   │
│  │         (Toggle button)                     │  │         (Toggle button)                   │   │
│  │                                             │  │                                           │   │
│  │  ┌──────────────────────────────────────┐   │  │  ┌────────────────────────────────────┐   │   │
│  │  │  🧱 Add Block                        │   │  │  │  ⚙ Properties                      │   │   │
│  │  └──────────────────────────────────────┘   │  │  └────────────────────────────────────┘   │   │
│  │                                             │  │                                           │   │
│  └─────────────────────────────────────────────┘  └───────────────────────────────────────────┘   │
│                                                                                                    │
└────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

**Comportement Tablet:**
- Palette et Properties deviennent des panels flottants (toggleable)
- Canvas prend toute la largeur
- Boutons flottants pour ouvrir les panels

---

## Layout Mobile (< 768px)

```
┌──────────────────────────────────────┐
│                                      │
│  ← Back   Workflow Name ▾   ⋮        │
│                                      │
├──────────────────────────────────────┤
│                                      │
│  ┌────────────────────────────────┐  │
│  │                                │  │
│  │          CANVAS                │  │
│  │       (Touch optimized)        │  │
│  │                                │  │
│  │    ┌───────┐     ┌───────┐    │  │
│  │    │Trigger│────▶│  AI   │    │  │
│  │    └───────┘     └───────┘    │  │
│  │                                │  │
│  │                                │  │
│  │                                │  │
│  │                                │  │
│  └────────────────────────────────┘  │
│                                      │
│  ┌────────────────────────────────┐  │
│  │                                │  │
│  │   🔍 75%    📐 Fit    🗺 Map   │  │
│  │                                │  │
│  └────────────────────────────────┘  │
│                                      │
├──────────────────────────────────────┤
│                                      │
│  ┌────────────┐  ┌────────────────┐  │
│  │            │  │                │  │
│  │  🧱 Blocks │  │  ▶ Run         │  │
│  │            │  │                │  │
│  └────────────┘  └────────────────┘  │
│                                      │
└──────────────────────────────────────┘
```

**Comportement Mobile:**
- Header simplifié
- Canvas touch-optimized avec gestes
- Bottom bar pour actions principales
- Panels en fullscreen sheets

---

## Interactions Canvas

### Drag & Drop Block

```
1. Drag depuis Palette:
   ┌─────────┐
   │ 🤖 Chat │  ←─ Dragging
   └─────────┘
        │
        ▼
   Canvas: Shows drop indicator

2. Drop sur Canvas:
   New node created at drop position
   Properties panel opens automatically

3. Cancel: Drop outside canvas = cancelled
```

### Connection Creation

```
1. Hover sur output handle:
   ┌─────────────────┐
   │   Node A        │──● ←─ Handle highlighted
   └─────────────────┘

2. Drag connection:
   ┌─────────────────┐      Dragging line
   │   Node A        │──●─ ─ ─ ─ ─ ─ ─ ─
   └─────────────────┘

3. Connect to input:
   ┌─────────────────┐                    ┌─────────────────┐
   │   Node A        │──●─────────────────●──│   Node B        │
   └─────────────────┘                    └─────────────────┘
   Connection created, edge rendered
```

### Multi-Selection

```
1. Shift+Click multiple nodes
   OR
2. Draw selection rectangle

   ╭ ─ ─ ─ ─ ─ ─ ─ ─ ╮
   │ ┌────┐   ┌────┐ │
   │ │ A  │   │ B  │ │  ←─ Selection box
   │ └────┘   └────┘ │
   ╰ ─ ─ ─ ─ ─ ─ ─ ─ ╯

3. Selected nodes highlighted
   Can drag together, delete together
```

---

## Keyboard Shortcuts

| Shortcut | Action |
|----------|--------|
| `⌘/Ctrl + S` | Save workflow |
| `⌘/Ctrl + Z` | Undo |
| `⌘/Ctrl + Shift + Z` | Redo |
| `⌘/Ctrl + C` | Copy selected nodes |
| `⌘/Ctrl + V` | Paste nodes |
| `⌘/Ctrl + D` | Duplicate selected |
| `Delete/Backspace` | Delete selected |
| `⌘/Ctrl + A` | Select all nodes |
| `Escape` | Deselect all |
| `⌘/Ctrl + +` | Zoom in |
| `⌘/Ctrl + -` | Zoom out |
| `⌘/Ctrl + 0` | Fit view |
| `Space + Drag` | Pan canvas |
| `⌘/Ctrl + K` | Command palette |
| `⌘/Ctrl + Enter` | Run workflow |

---

## Component Mapping

### shadcn/ui + React Flow

```typescript
WorkflowEditor
├── EditorHeader
│   ├── Button (back)
│   ├── Popover (workflow name editor)
│   ├── Badge (status)
│   ├── DropdownMenu (version)
│   ├── Button (undo)
│   ├── Button (redo)
│   ├── Button (run)
│   ├── AvatarGroup (collaborators)
│   └── DropdownMenu (more actions)
│
├── div.editor-body
│   ├── BlockPalette
│   │   ├── Input (search)
│   │   ├── Accordion (categories)
│   │   └── BlockItem[] (draggable)
│   │
│   ├── div.canvas-area
│   │   ├── ReactFlow
│   │   │   ├── MiniMap
│   │   │   ├── Controls
│   │   │   └── Background
│   │   └── CanvasToolbar
│   │
│   └── PropertiesPanel
│       ├── Tabs
│       │   ├── TabsTrigger (General)
│       │   ├── TabsTrigger (Input)
│       │   ├── TabsTrigger (Output)
│       │   └── TabsTrigger (Test)
│       └── TabsContent[]
│
└── ExecutionPanel
    ├── div.summary-stats
    └── Table (recent executions)
```

---

## States

### Empty Canvas

```
┌────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                        │
│                                                                                        │
│                                         ┌───────────────────────────────────┐          │
│                                         │                                   │          │
│                                         │         🎨                        │          │
│                                         │                                   │          │
│                                         │   Start building your workflow    │          │
│                                         │                                   │          │
│                                         │   Drag blocks from the left       │          │
│                                         │   panel to get started            │          │
│                                         │                                   │          │
│                                         │   ┌─────────────────────────────┐ │          │
│                                         │   │  + Add your first block     │ │          │
│                                         │   └─────────────────────────────┘ │          │
│                                         │                                   │          │
│                                         └───────────────────────────────────┘          │
│                                                                                        │
│                                                                                        │
└────────────────────────────────────────────────────────────────────────────────────────┘
```

### Saving State

```
Header status changes:
┌────────────────────────────────────────────┐
│  ... │ ● Saving...  │ ...                  │
└────────────────────────────────────────────┘

Then:
┌────────────────────────────────────────────┐
│  ... │ ✓ Saved      │ ...                  │
└────────────────────────────────────────────┘
```

### Execution Running

```
┌────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                        │
│                                                                                        │
│                ┌─────────────────┐        ┌─────────────────┐                          │
│                │   📥 Webhook    │        │   🤖 AI Block   │                          │
│                │   ───────────   │───────▶│   ───────────   │                          │
│                │   ✓ Completed   │        │   ◉ Running     │  ←─ Pulse animation      │
│                │                 │        │   Processing... │                          │
│                └─────────────────┘        └─────────────────┘                          │
│                                                  │                                      │
│                                                  │                                      │
│                                                  ▼                                      │
│                                           ┌─────────────────┐                          │
│                                           │   📧 Email      │                          │
│                                           │   ───────────   │                          │
│                                           │   ○ Pending     │                          │
│                                           │                 │                          │
│                                           └─────────────────┘                          │
│                                                                                        │
│                                                                                        │
│  ┌──────────────────────────────────────────────────────────────────────────────────┐  │
│  │                                                                                  │  │
│  │   ◉ Execution in progress...    Step 2/3    [ Stop Execution ]                   │  │
│  │                                                                                  │  │
│  └──────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                        │
└────────────────────────────────────────────────────────────────────────────────────────┘

Node states during execution:
- ✓ Completed: Green border, checkmark
- ◉ Running: Blue border, pulse animation
- ○ Pending: Muted border
- ✕ Failed: Red border, error icon
```

---

## Liens

- Précédent: [22-workflow-details.md](./22-workflow-details.md)
- Suivant: [31-editor-toolbar.md](./31-editor-toolbar.md)
- Parent: [00-overview.md](./00-overview.md)
