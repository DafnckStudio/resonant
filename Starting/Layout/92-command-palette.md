# 92 - Command Palette

> **Purpose**: Global command palette providing keyboard-driven quick access to navigation, actions, workflows, and settings throughout the Resonant.ai platform.

---

## Command Palette Overview

### Trigger & Activation
```
Keyboard Shortcut: ⌘K (Mac) / Ctrl+K (Windows/Linux)

Alternative triggers:
- Click search icon in header
- Type "/" anywhere (when not in input field)
```

---

## Main Command Palette

### Default State (Empty Query)
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 Type a command or search...                              ⌘K     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Recent                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  📄  Content Generation Pipeline                          Recent   │    │
│  │       Workflow • Last edited 2 hours ago                           │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📄  SEO Analysis Workflow                                Recent   │    │
│  │       Workflow • Last edited yesterday                             │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  ⚙️  API Keys                                              Recent   │    │
│  │       Settings • Visited 3 days ago                                │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Quick Actions                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  +   Create new workflow                                   ⌘N      │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📋  Browse templates                                      ⌘T      │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📥  Import workflow                                       ⌘I      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ─────────────────────────────────────────────────────────────────────────  │
│  ↑↓ Navigate   ↵ Select   esc Close                           ? Help      │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### With Search Query
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 content|                                                   ✕     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Workflows                                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │▓ 📄  Content Generation Pipeline                                   │    │
│  │       Workflow • 5 blocks • Last run: 2h ago                        │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📄  Content Repurposing                                           │    │
│  │       Workflow • 8 blocks • Last run: 1d ago                        │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📄  Blog Content Calendar                                         │    │
│  │       Workflow • 3 blocks • Draft                                   │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Templates                                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  📋  Content Marketing Suite                                       │    │
│  │       Template • By Resonant Team • ⭐ 4.8                          │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Actions                                                                    │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  +   Create "content" workflow                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ─────────────────────────────────────────────────────────────────────────  │
│  6 results                                              Press ↵ to select  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

▓ = Selected/highlighted item
```

---

## Command Categories

### Navigation Commands (>)
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 > go to|                                                   ✕     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Pages                                                                      │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │▓ 🏠  Go to Dashboard                                        ⌘⇧D    │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📄  Go to Workflows                                        ⌘⇧W    │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📋  Go to Templates                                        ⌘⇧T    │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🛒  Go to Marketplace                                      ⌘⇧M    │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📊  Go to Analytics                                        ⌘⇧A    │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  ⚙️  Go to Settings                                         ⌘,     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ─────────────────────────────────────────────────────────────────────────  │
│  Type ">" to see all navigation commands                                    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Action Commands (/)
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 /|                                                         ✕     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Workflow Actions                                                           │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  +   /create     Create new workflow                        ⌘N     │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  ▶️  /run        Run current workflow                       ⌘↵     │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📋  /duplicate  Duplicate workflow                         ⌘D     │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📤  /share      Share workflow                             ⌘⇧S    │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📥  /export     Export workflow                                    │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🔴  /delete     Delete workflow                                    │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Editor Actions                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  🧱  /add-block  Add a new block                            ⌘⇧B    │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🔗  /connect    Connect blocks                                     │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  ↩️  /undo       Undo last action                           ⌘Z     │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  ↪️  /redo       Redo last action                           ⌘⇧Z    │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ─────────────────────────────────────────────────────────────────────────  │
│  Type "/" to see all action commands                                        │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Settings Commands (@)
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 @settings|                                                 ✕     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Settings                                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  👤  @profile       Edit your profile                              │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🔑  @api-keys      Manage API keys                                │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🔗  @integrations  Manage integrations                            │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  👥  @team          Team settings                                  │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🔔  @notifications Notification preferences                       │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  💳  @billing       Billing & subscription                         │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🎨  @appearance    Theme & display                                │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ─────────────────────────────────────────────────────────────────────────  │
│  Type "@" to see all settings commands                                      │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Block Commands (#)
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 #openai|                                                   ✕     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  AI & LLM Blocks                                                            │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │▓ 🤖  #openai-gpt     OpenAI GPT                                    │    │
│  │       Generate text with GPT models                                 │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🤖  #openai-dall-e  OpenAI DALL-E                                 │    │
│  │       Generate images from text                                     │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🎤  #openai-whisper OpenAI Whisper                                │    │
│  │       Transcribe audio to text                                      │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  💬  #openai-chat    OpenAI Chat                                   │    │
│  │       Multi-turn conversation                                       │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ─────────────────────────────────────────────────────────────────────────  │
│  ↵ Add to workflow   Tab Preview   Type "#" to see all blocks             │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Contextual Commands

### In Editor Context
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 Type a command or search...                              ⌘K     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Current Workflow: Content Generation Pipeline                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  ▶️  Run this workflow                                      ⌘↵     │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  💾  Save changes                                           ⌘S     │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🧱  Add block                                              ⌘⇧B    │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📤  Share workflow                                         ⌘⇧S    │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📜  View history                                           ⌘⇧H    │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Editor Actions                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  🎯  Center view                                            ⌘0     │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📐  Zoom to fit                                            ⌘1     │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🔳  Toggle grid                                            ⌘G     │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📏  Auto-layout blocks                                     ⌘⇧L    │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### With Block Selected
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 Type a command or search...                              ⌘K     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Selected: OpenAI GPT Block                                                 │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  ⚙️  Configure block                                        ↵      │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📋  Duplicate block                                        ⌘D     │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🔴  Delete block                                           ⌫      │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🔗  Add connection from this block                                │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  ▶️  Run from this block                                           │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  💬  Add comment                                            ⌘⇧C    │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Transform                                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  🔄  Convert to different block type                               │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📦  Extract to subworkflow                                        │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Search Results Types

### Workflow Results
```
┌─────────────────────────────────────────────────────────────────────────────┐
│  📄  Content Generation Pipeline                                           │
│       Workflow • 5 blocks • Last run: 2h ago                               │
│       ▶️ Run  📝 Edit  📤 Share                              📁 Marketing  │
└─────────────────────────────────────────────────────────────────────────────┘
                                                               └─ Folder tag
```

### Template Results
```
┌─────────────────────────────────────────────────────────────────────────────┐
│  📋  Email Campaign Builder                                                │
│       Template • By Resonant Team • ⭐ 4.8 (124)                            │
│       Create automated email sequences                                      │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Settings Results
```
┌─────────────────────────────────────────────────────────────────────────────┐
│  ⚙️  API Keys                                                              │
│       Settings • Security & API                                            │
│       Manage your API keys and access tokens                               │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Team Member Results
```
┌─────────────────────────────────────────────────────────────────────────────┐
│  ┌──┐ Sarah Mitchell                                                       │
│  │SM│ sarah@example.com • Editor                                           │
│  └──┘ 🟢 Online • 3 workflows                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Block Results
```
┌─────────────────────────────────────────────────────────────────────────────┐
│  🤖  OpenAI GPT                                                            │
│       AI Block • Generate text with GPT-4, GPT-3.5                         │
│       Tab: Preview  ↵: Add to workflow                                     │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Special Commands

### Theme Toggle
```
Typing "theme" or "dark mode" or "light mode":

┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 theme|                                                     ✕     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Appearance                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  🌙  Switch to Dark Mode                                   ⌘⇧T     │    │
│  │       Currently: Light Mode                                         │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  💻  Use System Theme                                               │    │
│  │       Follows your OS preference                                    │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Help Command
```
Typing "?" or "help":

┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 ?|                                                         ✕     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Keyboard Shortcuts                                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  ⌘K       Open command palette                                      │    │
│  │  ⌘N       Create new workflow                                       │    │
│  │  ⌘↵       Run workflow                                              │    │
│  │  ⌘S       Save changes                                              │    │
│  │  ⌘Z       Undo                                                      │    │
│  │  ⌘⇧Z      Redo                                                      │    │
│  │  ⌘,       Open settings                                             │    │
│  │  ?        Show this help                                            │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Command Prefixes                                                           │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  >        Navigation commands (go to pages)                         │    │
│  │  /        Action commands                                           │    │
│  │  @        Settings commands                                         │    │
│  │  #        Block commands (in editor)                                │    │
│  │  :        Quick settings toggles                                    │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  [ View Full Documentation ]                                                │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Calculator
```
Typing math expression:

┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 24 * 365|                                                  ✕     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Calculator                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  🔢  = 8,760                                           Copy result  │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Autocomplete & Suggestions

### Command Autocomplete
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 /cr|eate workflow                                          ✕     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│       │  └─ ghost text autocomplete suggestion                             │
│       └─ cursor position                                                   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │▓ +   /create workflow     Create new workflow               ⌘N     │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  📁  /create folder       Create new folder                        │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🔑  /create api-key      Add new API key                          │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Tab to complete • ↵ to select                                             │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Fuzzy Search Highlighting
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 cgp|                                                       ✕     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Workflows                                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │▓ 📄  [C]ontent [G]eneration [P]ipeline                             │    │
│  │       Workflow • 5 blocks                                           │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  [C], [G], [P] = Highlighted matching characters                           │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Loading & Empty States

### Loading State
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 search query|                                              ✕     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │                        ◠ ◡ ◠ Searching...                           │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### No Results State
```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 🔍 xyzabc123|                                                 ✕     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                                                                     │    │
│  │                          🔍                                         │    │
│  │                                                                     │    │
│  │                   No results for "xyzabc123"                        │    │
│  │                                                                     │    │
│  │              Try different keywords or check your spelling          │    │
│  │                                                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Suggestions                                                                │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  +   Create workflow named "xyzabc123"                              │    │
│  ├─────────────────────────────────────────────────────────────────────┤    │
│  │  🔍  Search in marketplace                                          │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Keyboard Navigation

### Navigation Reference
```
┌─────────────────────────────────────────────────────────────────────────────┐
│  Key                  │  Action                                            │
├───────────────────────┼────────────────────────────────────────────────────┤
│  ↑ / ↓                │  Navigate results                                  │
│  ↵ Enter              │  Select/execute                                    │
│  Tab                  │  Autocomplete / Preview                            │
│  Escape               │  Close palette                                     │
│  ⌘/Ctrl + Backspace  │  Clear input                                       │
│  ⌘/Ctrl + ↑          │  Jump to first result                              │
│  ⌘/Ctrl + ↓          │  Jump to last result                               │
│  ⌘/Ctrl + 1-9        │  Quick select result 1-9                           │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Mobile Adaptation

### Mobile Command Palette
```
┌─────────────────────────────────────────┐
│ ✕                                       │
├─────────────────────────────────────────┤
│ ┌─────────────────────────────────────┐ │
│ │ 🔍 Search or type command...        │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ Recent                                  │
│ ┌─────────────────────────────────────┐ │
│ │ 📄 Content Pipeline           →     │ │
│ ├─────────────────────────────────────┤ │
│ │ 📄 SEO Workflow              →     │ │
│ ├─────────────────────────────────────┤ │
│ │ ⚙️ Settings                   →     │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ Quick Actions                           │
│ ┌─────────────────────────────────────┐ │
│ │ + Create Workflow             →     │ │
│ ├─────────────────────────────────────┤ │
│ │ 📋 Templates                  →     │ │
│ └─────────────────────────────────────┘ │
│                                         │
│                                         │
├─────────────────────────────────────────┤
│ [   Q   ] [   W   ] [   E   ] [   R   ] │
│                                         │
│           Virtual Keyboard              │
│                                         │
└─────────────────────────────────────────┘

- Full screen on mobile
- Virtual keyboard integration
- Touch-friendly result items
- Swipe to dismiss
```

---

## Component Structure

```
src/components/
├── command-palette/
│   ├── CommandPalette.tsx        # Main component
│   ├── CommandInput.tsx          # Search input with shortcuts
│   ├── CommandList.tsx           # Results list container
│   ├── CommandGroup.tsx          # Grouped results section
│   ├── CommandItem.tsx           # Individual result item
│   ├── CommandEmpty.tsx          # No results state
│   ├── CommandLoading.tsx        # Loading state
│   ├── CommandShortcut.tsx       # Keyboard shortcut display
│   ├── CommandDialog.tsx         # Modal wrapper
│   └── hooks/
│       ├── useCommands.ts        # Command registry
│       ├── useSearch.ts          # Search logic
│       └── useKeyboardNav.ts     # Navigation handling
```

---

## State Management

```typescript
interface CommandPaletteState {
  isOpen: boolean;
  query: string;
  selectedIndex: number;
  context: 'global' | 'editor' | 'block-selected';

  results: {
    workflows: WorkflowResult[];
    templates: TemplateResult[];
    actions: ActionResult[];
    settings: SettingResult[];
    blocks: BlockResult[];
    members: MemberResult[];
  };

  recentItems: RecentItem[];
  isLoading: boolean;
  error: string | null;
}

interface Command {
  id: string;
  label: string;
  description?: string;
  icon: ReactNode;
  shortcut?: string[];
  category: 'navigation' | 'action' | 'settings' | 'block';
  keywords: string[];
  action: () => void | Promise<void>;
  when?: () => boolean;  // Conditional availability
}
```

---

## Animations

```
Open:
- Backdrop: Fade in (150ms)
- Dialog: Fade + Scale from 0.95 (150ms)
- Input: Auto-focus

Close:
- Backdrop: Fade out (100ms)
- Dialog: Fade + Scale to 0.95 (100ms)

Result navigation:
- Highlight: Immediate (no animation)
- Group expand/collapse: Height transition (150ms)
```

---

## Related Files

- [90-modal-system.md](./90-modal-system.md) - Modal patterns
- [91-create-workflow.md](./91-create-workflow.md) - Create workflow command
- [30-workflow-editor.md](./30-workflow-editor.md) - Editor context commands
- [40-block-palette.md](./40-block-palette.md) - Block search integration
- [00-global-layout.md](./00-global-layout.md) - Header integration
