# 41 - Block Anatomy

> Anatomie détaillée d'un block dans le workflow editor - structure, zones, ports et états visuels.

---

## Vue d'Ensemble

Un block est l'unité fondamentale du workflow Resonant. Chaque block représente une action (AI, transformation, logique) et possède une structure visuelle cohérente avec des zones fonctionnelles distinctes.

---

## Anatomie Complète du Block

### Block Standard (280px × 160px)

```
┌──────────────────────────────────────────────────────────────┐
│                    BLOCK STANDARD                            │
│                     280px × 160px                            │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│    ╭─────────────────────────────────────────────────────╮   │
│    │ ╭───────────────────────────────────────────────╮   │   │
│    │ │░░░░░░░░░░░░░░░░ HEADER ZONE ░░░░░░░░░░░░░░░░░│   │   │
│    │ │░░ [Icon] Block Name               [≡] [×] ░░░│   │   │
│    │ ╰───────────────────────────────────────────────╯   │   │
│    │                                                      │   │
│    │  INPUT PORTS              OUTPUT PORTS               │   │
│    │      │                         │                     │   │
│ ●──┼──────┤   ╭─────────────────╮   ├──────────────────●  │   │
│    │      │   │                 │   │                     │   │
│ ○──┼──────┤   │   BODY ZONE     │   ├──────────────────●  │   │
│    │      │   │   (Content)     │   │                     │   │
│ ●──┼──────┤   │                 │   ├──────────────────○  │   │
│    │      │   ╰─────────────────╯   │                     │   │
│    │                                                      │   │
│    │ ╭───────────────────────────────────────────────╮   │   │
│    │ │▒▒▒▒▒▒▒▒▒▒▒▒▒▒ FOOTER ZONE ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒│   │   │
│    │ │▒▒ Status • Execution Time                ▒▒▒│   │   │
│    │ ╰───────────────────────────────────────────────╯   │   │
│    ╰─────────────────────────────────────────────────────╯   │
│                                                              │
│    ● = Required Port   ○ = Optional Port                     │
└──────────────────────────────────────────────────────────────┘
```

---

## Zones du Block

### Zone 1 : Header (32px height)

```
┌─────────────────────────────────────────────────────────────────┐
│                          HEADER                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │                                                          │    │
│  │  ┌────┐                                                  │    │
│  │  │ 🤖 │  GPT-4 Turbo          ●  ···  ▼                 │    │
│  │  └────┘                                                  │    │
│  │    │         │                │   │    │                 │    │
│  │    │         │                │   │    │                 │    │
│  │  Icon    Block Name      Status  Menu  Collapse          │    │
│  │                                                          │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ COMPONENTS                                               │    │
│  │ • Icon (24px) - Lucide icon selon type                  │    │
│  │ • Name (font-medium) - Editable on double-click         │    │
│  │ • Status Dot (8px) - Execution state indicator          │    │
│  │ • Menu Button (···) - Actions dropdown                  │    │
│  │ • Collapse (▼/▶) - Toggle body visibility               │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

#### Header States

```
┌─────────────────────────────────────────────────────────────────┐
│                      HEADER STATES                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  DEFAULT                                                         │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │  [🤖]  GPT-4 Turbo                          ···  ▼      │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│                                                                  │
│  EDITING NAME                                                    │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │  [🤖]  │GPT-4 Turbo█                        ✓    ×      │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│  Border: ring-2 ring-violet-500                                  │
│                                                                  │
│  WITH STATUS                                                     │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │  [🤖]  GPT-4 Turbo                    🟢    ···  ▼      │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│  🟢 = Success, 🔵 = Running, 🟡 = Pending, 🔴 = Error            │
│                                                                  │
│  WITH COLLABORATOR                                               │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │  [🤖]  GPT-4 Turbo        [👤 Marie]        ···  ▼      │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│  Avatar badge when collaborator is editing                       │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### Zone 2 : Body (Variable height, min 64px)

```
┌─────────────────────────────────────────────────────────────────┐
│                           BODY                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │                                                          │    │
│  │   ╭─────────────────────────────────────────────────╮   │    │
│  │   │                                                  │   │    │
│  │   │  Model                                          │   │    │
│  │   │  ┌────────────────────────────────────────────┐ │   │    │
│  │   │  │ gpt-4-turbo                           ▼    │ │   │    │
│  │   │  └────────────────────────────────────────────┘ │   │    │
│  │   │                                                  │   │    │
│  │   │  Prompt                                         │   │    │
│  │   │  ┌────────────────────────────────────────────┐ │   │    │
│  │   │  │ {{system_prompt}}                          │ │   │    │
│  │   │  │                                            │ │   │    │
│  │   │  └────────────────────────────────────────────┘ │   │    │
│  │   │                                                  │   │    │
│  │   │  Temperature: 0.7        Max Tokens: 2048       │   │    │
│  │   │  ────────●───────        ──────────●─────       │   │    │
│  │   │                                                  │   │    │
│  │   ╰─────────────────────────────────────────────────╯   │    │
│  │                                                          │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ BODY CONTENT TYPES                                       │    │
│  │ • Inline Config - Key settings visible in block          │    │
│  │ • Preview - Output/result preview                        │    │
│  │ • Placeholder - Empty state or instruction               │    │
│  │ • Streaming - Live output during execution               │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

#### Body Content Types

```
┌─────────────────────────────────────────────────────────────────┐
│                    BODY CONTENT TYPES                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  INLINE CONFIG (Most blocks)                                     │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │  Model: gpt-4-turbo                                     │    │
│  │  Temperature: 0.7                                        │    │
│  │  [ Configure more... ]                                   │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│                                                                  │
│  PREVIEW (After execution)                                       │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │  "The analysis shows that..."                           │    │
│  │  ─────────────────────────────                          │    │
│  │  1,234 tokens • 2.3s                                    │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│                                                                  │
│  PLACEHOLDER (Not configured)                                    │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │                                                          │    │
│  │           [🔧]                                           │    │
│  │      Click to configure                                  │    │
│  │                                                          │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│                                                                  │
│  STREAMING (During execution)                                    │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │  "The analysis shows█                                   │    │
│  │   ─────────────────────                                 │    │
│  │  ⟳ Generating... (1.2s)                                 │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│                                                                  │
│  CODE PREVIEW (Transform blocks)                                 │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │  ```javascript                                          │    │
│  │  const result = input                                   │    │
│  │    .filter(...)                                         │    │
│  │  ```                                                    │    │
│  │  [ Edit code ]                                          │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### Zone 3 : Footer (24px height)

```
┌─────────────────────────────────────────────────────────────────┐
│                          FOOTER                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │  ✓ Success • 2.3s                      $0.012           │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│       │           │                           │                  │
│    Status     Duration                      Cost                 │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ FOOTER STATES                                            │    │
│  │                                                          │    │
│  │ IDLE (not run)                                          │    │
│  │ ╭───────────────────────────────────────────────────╮   │    │
│  │ │  ○ Not executed                                   │   │    │
│  │ ╰───────────────────────────────────────────────────╯   │    │
│  │                                                          │    │
│  │ RUNNING                                                  │    │
│  │ ╭───────────────────────────────────────────────────╮   │    │
│  │ │  ⟳ Running... (1.2s)              ━━━━━━━━░░░░    │   │    │
│  │ ╰───────────────────────────────────────────────────╯   │    │
│  │                                                          │    │
│  │ SUCCESS                                                  │    │
│  │ ╭───────────────────────────────────────────────────╮   │    │
│  │ │  ✓ Success • 2.3s                    $0.012       │   │    │
│  │ ╰───────────────────────────────────────────────────╯   │    │
│  │                                                          │    │
│  │ ERROR                                                    │    │
│  │ ╭───────────────────────────────────────────────────╮   │    │
│  │ │  ✗ Error • Rate limit exceeded         [ Retry ]  │   │    │
│  │ ╰───────────────────────────────────────────────────╯   │    │
│  │                                                          │    │
│  │ SKIPPED (Condition false)                               │    │
│  │ ╭───────────────────────────────────────────────────╮   │    │
│  │ │  ⊘ Skipped (condition not met)                    │   │    │
│  │ ╰───────────────────────────────────────────────────╯   │    │
│  │                                                          │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## Système de Ports

### Port Anatomy

```
┌─────────────────────────────────────────────────────────────────┐
│                       PORT ANATOMY                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│                    INPUT PORT (LEFT)                             │
│                                                                  │
│          Label  Port Circle                                      │
│             │      │                                             │
│             ▼      ▼                                             │
│        ╭─────────────╮                                           │
│        │   prompt  ● │═══════                                    │
│        ╰─────────────╯                                           │
│                     │                                            │
│                  Port Hit Area (24px × 24px)                     │
│                                                                  │
│                                                                  │
│                    OUTPUT PORT (RIGHT)                           │
│                                                                  │
│                           Port Circle  Label                     │
│                                 │         │                      │
│                                 ▼         ▼                      │
│                            ╭─────────────╮                       │
│                  ═══════   │ ●  response │                       │
│                            ╰─────────────╯                       │
│                              │                                   │
│                           Port Hit Area                          │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### Port Types Visuels

```
┌─────────────────────────────────────────────────────────────────┐
│                       PORT TYPES                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  REQUIRED PORT (Filled circle)                                   │
│  ╭───────────────────────────────────────────────────────────╮  │
│  │                                                            │  │
│  │    ●───  Required Input     ───●  Required Output          │  │
│  │                                                            │  │
│  │    Circle: 12px, filled with category color                │  │
│  │    Border: 2px solid, darker shade                         │  │
│  │                                                            │  │
│  ╰───────────────────────────────────────────────────────────╯  │
│                                                                  │
│  OPTIONAL PORT (Hollow circle)                                   │
│  ╭───────────────────────────────────────────────────────────╮  │
│  │                                                            │  │
│  │    ○───  Optional Input     ───○  Optional Output          │  │
│  │                                                            │  │
│  │    Circle: 12px, transparent fill                          │  │
│  │    Border: 2px solid, category color                       │  │
│  │                                                            │  │
│  ╰───────────────────────────────────────────────────────────╯  │
│                                                                  │
│  ARRAY PORT (Double circle)                                      │
│  ╭───────────────────────────────────────────────────────────╮  │
│  │                                                            │  │
│  │    ◎───  Array Input        ───◎  Array Output             │  │
│  │                                                            │  │
│  │    Circle: 12px with inner 6px circle                      │  │
│  │    Accepts multiple connections                            │  │
│  │                                                            │  │
│  ╰───────────────────────────────────────────────────────────╯  │
│                                                                  │
│  EXECUTION PORT (Diamond)                                        │
│  ╭───────────────────────────────────────────────────────────╮  │
│  │                                                            │  │
│  │    ◆───  Exec In            ───◆  Exec Out                 │  │
│  │                                                            │  │
│  │    Diamond: 12px, controls execution flow                  │  │
│  │    Used by logic blocks (Condition, Loop)                  │  │
│  │                                                            │  │
│  ╰───────────────────────────────────────────────────────────╯  │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### Port States

```
┌─────────────────────────────────────────────────────────────────┐
│                       PORT STATES                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  DEFAULT                          HOVER                          │
│  ╭───────────────╮               ╭───────────────╮               │
│  │      ●        │               │    ╭●╮        │               │
│  ╰───────────────╯               │    ╰─╯        │               │
│  12px filled                     ╰───────────────╯               │
│                                  16px with glow ring             │
│                                                                  │
│  CONNECTED                        DRAGGING (Source)              │
│  ╭───────────────╮               ╭───────────────╮               │
│  │      ●════    │               │    [●]────→   │               │
│  ╰───────────────╯               ╰───────────────╯               │
│  With wire attached              Pulsing animation               │
│                                                                  │
│  DROP TARGET (Compatible)         DROP TARGET (Incompatible)     │
│  ╭───────────────╮               ╭───────────────╮               │
│  │    ╭───╮      │               │    ╭───╮      │               │
│  │    │ ● │      │               │    │ ⊘ │      │               │
│  │    ╰───╯      │               │    ╰───╯      │               │
│  ╰───────────────╯               ╰───────────────╯               │
│  Green highlight ring            Red X overlay                   │
│                                                                  │
│  ERROR (Disconnected)             RUNNING                        │
│  ╭───────────────╮               ╭───────────────╮               │
│  │    ╭●╮        │               │     (●)       │               │
│  │    │!│        │               │    ╰───╯      │               │
│  │    ╰─╯        │               ╰───────────────╯               │
│  ╰───────────────╯               Animated pulse                  │
│  Red border, ! badge                                             │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### Port Layout sur Block

```
┌─────────────────────────────────────────────────────────────────┐
│                    PORT LAYOUT ON BLOCK                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│           INPUT PORTS                      OUTPUT PORTS          │
│           (Left side)                      (Right side)          │
│                │                                │                │
│                ▼                                ▼                │
│                                                                  │
│   ╭────────────────────────────────────────────────────────╮    │
│   │                                                         │    │
│   │  ┌──────────────────────────────────────────────────┐  │    │
│   │  │ [🤖]  GPT-4 Turbo                      ···  ▼   │  │    │
│   │  └──────────────────────────────────────────────────┘  │    │
│   │                                                         │    │
│ ●─┤ system_prompt                                           ├─● │
│   │                                                         │    │
│ ●─┤ user_message    ┌────────────────────────┐              ├─● │
│   │                 │ Model: gpt-4-turbo     │     response     │
│ ○─┤ context         │ Temp: 0.7              │              ├─○ │
│   │                 └────────────────────────┘     metadata     │
│ ○─┤ tools                                                       │
│   │                                                         │    │
│   │  ┌──────────────────────────────────────────────────┐  │    │
│   │  │ ✓ Success • 2.3s                      $0.012    │  │    │
│   │  └──────────────────────────────────────────────────┘  │    │
│   │                                                         │    │
│   ╰────────────────────────────────────────────────────────╯    │
│                                                                  │
│   Port spacing: 24px between ports                               │
│   Port labels: text-xs, truncate if > 12 chars                   │
│   Label position: Inside block, 8px from edge                    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## États du Block

### Visual States

```
┌─────────────────────────────────────────────────────────────────┐
│                      BLOCK VISUAL STATES                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  DEFAULT                                                         │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │  [🤖]  GPT-4 Turbo                          ···  ▼      │    │
│  │  ─────────────────────────────────────────────────────  │    │
│  │  Model: gpt-4-turbo                                     │    │
│  │  Temperature: 0.7                                        │    │
│  │  ─────────────────────────────────────────────────────  │    │
│  │  ○ Not executed                                          │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│  Border: border-border (muted)                                   │
│  Shadow: shadow-sm                                               │
│                                                                  │
│  HOVER                                                           │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │  [🤖]  GPT-4 Turbo                          ···  ▼      │░░  │
│  │  ─────────────────────────────────────────────────────  │░░  │
│  │  Model: gpt-4-turbo                                     │░░  │
│  │  Temperature: 0.7                                        │░░  │
│  │  ─────────────────────────────────────────────────────  │░░  │
│  │  ○ Not executed                                          │░░  │
│  ╰─────────────────────────────────────────────────────────╯░░  │
│   ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   │
│  Border: border-violet-300                                       │
│  Shadow: shadow-md                                               │
│                                                                  │
│  SELECTED                                                        │
│  ╔═════════════════════════════════════════════════════════╗    │
│  ║  [🤖]  GPT-4 Turbo                          ···  ▼      ║    │
│  ║  ─────────────────────────────────────────────────────  ║    │
│  ║  Model: gpt-4-turbo                                     ║    │
│  ║  Temperature: 0.7                                        ║    │
│  ║  ─────────────────────────────────────────────────────  ║    │
│  ║  ○ Not executed                                          ║    │
│  ╚═════════════════════════════════════════════════════════╝    │
│  Border: ring-2 ring-violet-500                                  │
│  Shadow: shadow-lg                                               │
│  Resize handles visible at corners                               │
│                                                                  │
│  MULTI-SELECTED                                                  │
│  ╔═════════════════════════════════════════════════════════╗    │
│  ║  [🤖]  GPT-4 Turbo                    [2 selected]      ║    │
│  ║  ─────────────────────────────────────────────────────  ║    │
│  ║  Model: gpt-4-turbo                                     ║    │
│  ║  Temperature: 0.7                                        ║    │
│  ║  ─────────────────────────────────────────────────────  ║    │
│  ║  ○ Not executed                                          ║    │
│  ╚═════════════════════════════════════════════════════════╝    │
│  Border: ring-2 ring-violet-500 ring-dashed                      │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### Execution States

```
┌─────────────────────────────────────────────────────────────────┐
│                    EXECUTION STATES                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  PENDING                                                         │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │  [🤖]  GPT-4 Turbo                       🟡  ···  ▼     │    │
│  │  ─────────────────────────────────────────────────────  │    │
│  │  Model: gpt-4-turbo                                     │    │
│  │  ─────────────────────────────────────────────────────  │    │
│  │  ◔ Waiting...                                            │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│  Border-left: 3px solid amber-400                                │
│                                                                  │
│  RUNNING                                                         │
│  ╭═════════════════════════════════════════════════════════╮    │
│  │  [🤖]  GPT-4 Turbo                       🔵  ···  ▼     │    │
│  │  ═════════════════════════════════════════════════════  │    │
│  │  "The analysis reveals that the data█                   │    │
│  │   ─────────────────────────────────                     │    │
│  │  ═════════════════════════════════════════════════════  │    │
│  │  ⟳ Generating... (1.5s)         ━━━━━━━━░░░░░░         │    │
│  ╰═════════════════════════════════════════════════════════╯    │
│  Border: border-blue-400 animated pulse                          │
│  Body: Streaming content preview                                 │
│  Footer: Progress bar                                            │
│                                                                  │
│  SUCCESS                                                         │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │  [🤖]  GPT-4 Turbo                       🟢  ···  ▼     │    │
│  │  ─────────────────────────────────────────────────────  │    │
│  │  "The analysis reveals that the data patterns..."       │    │
│  │  ─────────────────────────────────────────────────────  │    │
│  │  ✓ Success • 2.3s                          $0.012       │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│  Border-left: 3px solid emerald-500                              │
│  Body: Output preview                                            │
│                                                                  │
│  ERROR                                                           │
│  ╭═══════════════════════════════════════════════════════╮      │
│  │  [🤖]  GPT-4 Turbo                       🔴  ···  ▼   │      │
│  │  ═══════════════════════════════════════════════════  │      │
│  │  ┌─────────────────────────────────────────────────┐  │      │
│  │  │ ⚠️  Error: Rate limit exceeded                   │  │      │
│  │  │     Please wait 60 seconds or upgrade plan      │  │      │
│  │  └─────────────────────────────────────────────────┘  │      │
│  │  ═══════════════════════════════════════════════════  │      │
│  │  ✗ Failed • 0.8s                          [ Retry ]   │      │
│  ╰═══════════════════════════════════════════════════════╯      │
│  Border: border-red-500                                          │
│  Background: bg-red-50/50                                        │
│                                                                  │
│  SKIPPED                                                         │
│  ╭─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─╮       │
│  │  [🤖]  GPT-4 Turbo                       ⊘  ···  ▼   │       │
│  │  ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─   │       │
│  │  (Skipped - condition not met)                       │       │
│  │  ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─   │       │
│  │  ⊘ Skipped                                           │       │
│  ╰─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─╯       │
│  Border: border-dashed border-muted                              │
│  Opacity: 0.6                                                    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### Configuration States

```
┌─────────────────────────────────────────────────────────────────┐
│                   CONFIGURATION STATES                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  UNCONFIGURED (Needs attention)                                  │
│  ╭═══════════════════════════════════════════════════════╮      │
│  │  [🤖]  GPT-4 Turbo                       ⚠️  ···  ▼   │      │
│  │  ═══════════════════════════════════════════════════  │      │
│  │                                                        │      │
│  │       [⚙️]  Click to configure this block             │      │
│  │              2 required fields missing                │      │
│  │                                                        │      │
│  │  ═══════════════════════════════════════════════════  │      │
│  │  ⚠️ Needs configuration                                │      │
│  ╰═══════════════════════════════════════════════════════╯      │
│  Border: border-amber-400                                        │
│  Warning badge in header                                         │
│                                                                  │
│  VALIDATION ERROR                                                │
│  ╭═══════════════════════════════════════════════════════╮      │
│  │  [🤖]  GPT-4 Turbo                       🔴  ···  ▼   │      │
│  │  ═══════════════════════════════════════════════════  │      │
│  │                                                        │      │
│  │  Model  ────────────────────────────                  │      │
│  │  ┌────────────────────────────────────┐               │      │
│  │  │ (empty)                      ▼     │ ← Required    │      │
│  │  └────────────────────────────────────┘               │      │
│  │                                                        │      │
│  │  ═══════════════════════════════════════════════════  │      │
│  │  ✗ 1 validation error                                 │      │
│  ╰═══════════════════════════════════════════════════════╯      │
│  Invalid field: red border                                       │
│                                                                  │
│  DISABLED                                                        │
│  ╭─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─╮       │
│  │  [🤖]  GPT-4 Turbo  (Disabled)           ⊘  ···  ▼   │       │
│  │  ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─   │       │
│  │  Model: gpt-4-turbo                                  │       │
│  │  Temperature: 0.7                                     │       │
│  │  ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─   │       │
│  │  Block disabled                                       │       │
│  ╰─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─╯       │
│  Entire block: opacity-50, pointer-events-none                   │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## Variations de Taille

### Block Sizes

```
┌─────────────────────────────────────────────────────────────────┐
│                       BLOCK SIZES                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  COMPACT (200px × 80px)                                          │
│  ╭────────────────────────────────╮                              │
│  │ [🤖] GPT-4         ···         │                              │
│●─┤────────────────────────────────├─●                            │
│  │ gpt-4-turbo • 0.7              │                              │
│  ╰────────────────────────────────╯                              │
│  Use: Simple blocks, overview mode                               │
│                                                                  │
│                                                                  │
│  STANDARD (280px × 160px)                                        │
│  ╭────────────────────────────────────────────╮                  │
│  │ [🤖] GPT-4 Turbo                ···  ▼     │                  │
│  │ ──────────────────────────────────────── │                  │
│●─┤ Model: gpt-4-turbo                         ├─●                │
│  │ Temperature: 0.7                           │                  │
│●─┤ Prompt: {{input}}                          ├─●                │
│  │ ──────────────────────────────────────── │                  │
│  │ ○ Not executed                             │                  │
│  ╰────────────────────────────────────────────╯                  │
│  Use: Default block view                                         │
│                                                                  │
│                                                                  │
│  EXPANDED (320px × 280px)                                        │
│  ╭──────────────────────────────────────────────────╮            │
│  │ [🤖] GPT-4 Turbo                      ···  ▼     │            │
│  │ ────────────────────────────────────────────── │            │
│  │                                                  │            │
│●─┤ Model                                            ├─●          │
│  │ ┌────────────────────────────────────────────┐  │            │
│  │ │ gpt-4-turbo                            ▼   │  │            │
│  │ └────────────────────────────────────────────┘  │            │
│●─┤                                                  ├─●          │
│  │ System Prompt                                    │            │
│  │ ┌────────────────────────────────────────────┐  │            │
│●─┤ │ You are a helpful assistant...             │  ├─○          │
│  │ │                                            │  │            │
│  │ └────────────────────────────────────────────┘  │            │
│  │                                                  │            │
│  │ Temperature: 0.7    Max Tokens: 2048            │            │
│  │ ─────●─────────     ──────────●───────          │            │
│  │                                                  │            │
│  │ ────────────────────────────────────────────── │            │
│  │ ✓ Success • 2.3s                    $0.012      │            │
│  ╰──────────────────────────────────────────────────╯            │
│  Use: Detailed editing, complex configuration                    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### Collapsed Block

```
┌─────────────────────────────────────────────────────────────────┐
│                      COLLAPSED BLOCK                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  HEADER ONLY (280px × 48px)                                      │
│                                                                  │
│  ╭────────────────────────────────────────────╮                  │
│●─┤ [🤖] GPT-4 Turbo           🟢   ···  ▶     ├─●                │
│  ╰────────────────────────────────────────────╯                  │
│                                                                  │
│  ▶ = Click to expand                                             │
│  🟢 = Last execution status                                       │
│  Ports remain accessible                                         │
│                                                                  │
│                                                                  │
│  COLLAPSED WITH PREVIEW                                          │
│                                                                  │
│  ╭────────────────────────────────────────────╮                  │
│●─┤ [🤖] GPT-4 Turbo           🟢   ···  ▶     ├─●                │
│  │ ─────────────────────────────────────────  │                  │
│  │ "The analysis shows..."  • 2.3s            │                  │
│  ╰────────────────────────────────────────────╯                  │
│                                                                  │
│  Shows last output preview in single line                        │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## Block Menu Actions

```
┌─────────────────────────────────────────────────────────────────┐
│                     BLOCK MENU ACTIONS                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  HEADER MENU (Click ···)                                         │
│                                                                  │
│  ╭────────────────────────────────────╮                          │
│  │ [🤖] GPT-4 Turbo      ···▼  ▼     │                          │
│  ╰──────────────────────┬─────────────╯                          │
│                         │                                        │
│           ╭─────────────▼───────────────╮                        │
│           │  ▶  Run this block     ⌘R   │                        │
│           │  ⎘  Duplicate          ⌘D   │                        │
│           │  ✂  Cut               ⌘X   │                        │
│           │  📋 Copy              ⌘C   │                        │
│           ├─────────────────────────────┤                        │
│           │  🔗 Copy block ID           │                        │
│           │  📤 Export as template      │                        │
│           ├─────────────────────────────┤                        │
│           │  ⊘  Disable block           │                        │
│           │  🔒 Lock editing            │                        │
│           ├─────────────────────────────┤                        │
│           │  🗑  Delete            ⌫    │                        │
│           ╰─────────────────────────────╯                        │
│                                                                  │
│  CONTEXT MENU (Right-click on block)                             │
│                                                                  │
│           ╭─────────────────────────────╮                        │
│           │  ▶  Run from here           │                        │
│           │  ⏸  Run to here             │                        │
│           ├─────────────────────────────┤                        │
│           │  ⎘  Duplicate          ⌘D   │                        │
│           │  ✂  Cut               ⌘X   │                        │
│           │  📋 Copy              ⌘C   │                        │
│           │  📄 Paste             ⌘V   │                        │
│           ├─────────────────────────────┤                        │
│           │  📐 Resize                  │                        │
│           │     ├ Compact               │                        │
│           │     ├ Standard        ✓     │                        │
│           │     └ Expanded              │                        │
│           ├─────────────────────────────┤                        │
│           │  📤 Extract to subworkflow  │                        │
│           │  💬 Add comment             │                        │
│           ├─────────────────────────────┤                        │
│           │  🗑  Delete            ⌫    │                        │
│           ╰─────────────────────────────╯                        │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## Resize Handles

```
┌─────────────────────────────────────────────────────────────────┐
│                      RESIZE HANDLES                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  SELECTED BLOCK WITH HANDLES                                     │
│                                                                  │
│       ◆─────────────────────────────────────────◆                │
│       │                                          │                │
│       │  ╔══════════════════════════════════╗   │                │
│       │  ║  [🤖]  GPT-4 Turbo      ···  ▼   ║   │                │
│       │  ║  ════════════════════════════════ ║   │                │
│       ◇  ║  Model: gpt-4-turbo              ║   ◇                │
│       │  ║  Temperature: 0.7                 ║   │                │
│       │  ║  ════════════════════════════════ ║   │                │
│       │  ║  ○ Not executed                   ║   │                │
│       │  ╚══════════════════════════════════╝   │                │
│       │                                          │                │
│       ◆─────────────────────────────────────────◆                │
│                                                                  │
│  ◆ = Corner handles (resize proportionally)                      │
│  ◇ = Edge handles (resize single dimension)                      │
│                                                                  │
│  HANDLE STATES                                                   │
│  ╭───────────────────────────────────────────────────────────╮  │
│  │                                                            │  │
│  │  Default: ◆ (6px, bg-white, border-violet-500)            │  │
│  │  Hover:   ◆ (8px, bg-violet-500, cursor: nwse-resize)     │  │
│  │  Dragging: ◆ (8px, bg-violet-600, ring-2)                 │  │
│  │                                                            │  │
│  ╰───────────────────────────────────────────────────────────╯  │
│                                                                  │
│  SIZE CONSTRAINTS                                                │
│  ╭───────────────────────────────────────────────────────────╮  │
│  │                                                            │  │
│  │  Minimum: 200px × 80px (Compact)                          │  │
│  │  Maximum: 480px × 600px                                   │  │
│  │  Snap to grid: 20px increments                            │  │
│  │                                                            │  │
│  ╰───────────────────────────────────────────────────────────╯  │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## Component Mapping

```
┌─────────────────────────────────────────────────────────────────┐
│                    COMPONENT MAPPING                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  BLOCK STRUCTURE                                                 │
│  ├── Block Container                                             │
│  │   └── Card (shadcn) + custom border/shadow styles            │
│  │                                                               │
│  ├── Header                                                      │
│  │   ├── Icon - Lucide icons                                    │
│  │   ├── Name - Input (editable on dblclick)                    │
│  │   ├── Status - Badge                                         │
│  │   ├── Menu - DropdownMenu                                    │
│  │   └── Collapse - Button (ghost)                              │
│  │                                                               │
│  ├── Body                                                        │
│  │   ├── Config Fields                                          │
│  │   │   ├── Select (shadcn)                                    │
│  │   │   ├── Input (shadcn)                                     │
│  │   │   ├── Textarea (shadcn)                                  │
│  │   │   └── Slider (shadcn)                                    │
│  │   ├── Preview - ScrollArea                                   │
│  │   └── Placeholder - Empty state                              │
│  │                                                               │
│  ├── Footer                                                      │
│  │   ├── Status Text - text-xs                                  │
│  │   ├── Duration - text-muted-foreground                       │
│  │   ├── Cost - Badge (outline)                                 │
│  │   └── Progress - Progress (shadcn)                           │
│  │                                                               │
│  └── Ports                                                       │
│      ├── Port Circle - Custom SVG/div                           │
│      ├── Port Label - text-xs                                   │
│      └── Port Tooltip - Tooltip (shadcn)                        │
│                                                                  │
│  REACT FLOW INTEGRATION                                          │
│  ├── Custom Node Type - ReactFlow CustomNode                    │
│  ├── Handles - ReactFlow Handle component                       │
│  └── Node Resizer - ReactFlow NodeResizer                       │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## Animations

```
┌─────────────────────────────────────────────────────────────────┐
│                       ANIMATIONS                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  BLOCK INTERACTIONS                                              │
│  ├── Hover                                                       │
│  │   └── transform: scale(1.02), transition: 150ms ease         │
│  │                                                               │
│  ├── Select                                                      │
│  │   └── ring animation: fade-in 100ms                          │
│  │                                                               │
│  ├── Drag                                                        │
│  │   ├── Ghost: opacity 0.5, scale 1.05                         │
│  │   └── Shadow: shadow-2xl                                     │
│  │                                                               │
│  └── Drop                                                        │
│      └── Bounce: scale 0.95 → 1.02 → 1, 200ms                   │
│                                                                  │
│  EXECUTION ANIMATIONS                                            │
│  ├── Pending                                                     │
│  │   └── Border pulse: animate-pulse (amber)                    │
│  │                                                               │
│  ├── Running                                                     │
│  │   ├── Border glow: animate-glow (blue)                       │
│  │   └── Progress bar: animate-progress                         │
│  │                                                               │
│  ├── Success                                                     │
│  │   └── Check icon: scale-in 200ms + checkmark draw            │
│  │                                                               │
│  └── Error                                                       │
│      └── Shake: animate-shake 300ms                             │
│                                                                  │
│  PORT ANIMATIONS                                                 │
│  ├── Hover                                                       │
│  │   └── Scale 1 → 1.3, glow ring                               │
│  │                                                               │
│  ├── Connecting                                                  │
│  │   └── Pulse: animate-pulse (category color)                  │
│  │                                                               │
│  └── Data Flow                                                   │
│      └── Particle animation along wire                          │
│                                                                  │
│  COLLAPSE/EXPAND                                                 │
│  └── Height: animate-accordion-down/up 200ms                    │
│                                                                  │
│  RESIZE                                                          │
│  └── Smooth transition: width/height 100ms ease                 │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## Category Colors Applied to Block

```
┌─────────────────────────────────────────────────────────────────┐
│                    CATEGORY COLORING                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  Each block type has a distinct color scheme applied to:         │
│  • Header background (subtle)                                    │
│  • Left border accent                                            │
│  • Icon background                                               │
│  • Port colors                                                   │
│                                                                  │
│  AI MODELS (Violet)                                              │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │▓▓│ [🤖] GPT-4 Turbo                        ···  ▼      │    │
│  │▓▓│─────────────────────────────────────────────────────│    │
│  │▓▓│ Model: gpt-4-turbo                                  │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│  Header: bg-violet-50, Border-left: violet-500                   │
│                                                                  │
│  DATA SOURCES (Blue)                                             │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │▓▓│ [🔌] API Call                           ···  ▼      │    │
│  │▓▓│─────────────────────────────────────────────────────│    │
│  │▓▓│ URL: https://api.example.com                        │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│  Header: bg-blue-50, Border-left: blue-500                       │
│                                                                  │
│  LOGIC & CONTROL (Amber)                                         │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │▓▓│ [⑂] Condition                          ···  ▼      │    │
│  │▓▓│─────────────────────────────────────────────────────│    │
│  │▓▓│ if: {{score}} > 0.8                                 │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│  Header: bg-amber-50, Border-left: amber-500                     │
│                                                                  │
│  TRANSFORMATIONS (Emerald)                                       │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │▓▓│ [⚡] JSON Parse                         ···  ▼      │    │
│  │▓▓│─────────────────────────────────────────────────────│    │
│  │▓▓│ Path: $.data.results                                │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│  Header: bg-emerald-50, Border-left: emerald-500                 │
│                                                                  │
│  OUTPUTS (Rose)                                                  │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │▓▓│ [📧] Send Email                         ···  ▼      │    │
│  │▓▓│─────────────────────────────────────────────────────│    │
│  │▓▓│ To: {{recipient}}                                   │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│  Header: bg-rose-50, Border-left: rose-500                       │
│                                                                  │
│  INTEGRATIONS (Cyan)                                             │
│  ╭─────────────────────────────────────────────────────────╮    │
│  │▓▓│ [⚡] Zapier                             ···  ▼      │    │
│  │▓▓│─────────────────────────────────────────────────────│    │
│  │▓▓│ Zap: Content Pipeline                               │    │
│  ╰─────────────────────────────────────────────────────────╯    │
│  Header: bg-cyan-50, Border-left: cyan-500                       │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## Navigation

| Précédent | Index | Suivant |
|-----------|-------|---------|
| [40 - Block Types](./40-block-types.md) | [Index](./README.md) | [42 - Block Connections](./42-block-connections.md) |

---

*Dernière mise à jour: Janvier 2026*
